# azure app service core concepts

## azure shared responsibility model

<table>
    <tr>
        <td  colspan="4" color="red"> azue的责任共享模型 </td>
    </tr>
    <tr>
        <td>本地私有云</td>
        <td>IAAS</td>
        <td>PAAS</td>
        <td>SAAS</td>
    </tr>
    <tr>
        <td bgcolor="black">Data&Access</td>
    </tr>
    <tr>
        <td color="black">应用</td>
    </tr>
    <tr>
        <td>运行时</td>
    </tr>
    <tr>
        <td>操作系统</td>
    </tr>
    <tr>
        <td>虚拟机</td>
    </tr>
    <tr>
        <td>存储</td>
    </tr>
    <tr>
        <td>计算</td>
    </tr>
    <tr>
        <td>网络</td>
    </tr>
</table>

## 服务类型：
    
    web应用
    RestFullAPI
    Mobile backend

应用在一个沙盒环境里，以一种完全受管控的方式进行执行和扩展。

## Web应用：

### web应用的可扩展托管：

    提供在云中托管web应用的快速方法。
    可以扩展web应用，并不需要为支持扩展而重新设计web应用。
    与VisualStudio高度集成。
    支持多种不同编程语言。

### 优势：
    
    即时部署
    在某些层可以使用SSL和用户自定义域名。
    web作业为独立扩展提供后台处理。
    不需要重新部署应用就能将web应用扩展到更高配置机器。

## web应用的APP服务的核心特性:

    支持多种语言和框架。
    DevOps优化：与Visual Studio团队服务、GitHub、Bitbucket、Docker Hub或Azure ACR进行持续集成和部署。
    支持高可用的全球扩展：支持手动或自动扩缩容。可以托管到微软全球的任何数据中心。
    支持与SaaS平台和本地数据中心的连接：对企业系统（如SAP）、SaaS服务（如Saleforce）和互联网服务（如Facebook）提供了50多种连接器。
    安全性与合规性:app服务符合ISO、SOC和PCI标准。
    应用模板：Azure市场提供了多种模板，如：WordPress、Joomla和Drupal
    与VisualStudio集成：支持工作的创建、部署和调试的流水线。
    API和移动端特性：对RestFulAPI提供跨域访问的转换开关、支持授权、离线数据同步、通知推送等功能。
    支持无服务编程：不需要显示预配和管理基础结构，随时按需运行代码。

## 应用服务计划

应用服务计划可以将订阅中的应用按逻辑进行分组。

    同一组中的web站点实例共享功能、容量和层等特征。
    大多场景下，应用服务计划是计费单位。

一个资源组可以包含多个应用服务计划，一个应用服务计划可以包含多个应用。

## 认证和授权

内建支持认证和授权功能：使用这些功能无需额外编码工作。

用户声明可用于代码:

    如果希望加强对认证的支持，可以将已存在的代码与流行的标识框架一起使用：ASP.NET标识、PHP服务变量。

内置令牌存储


为认证事件启用了日志记录和追踪功能。
支持流行的身份提供商:AzureAD、微软账户、Facebook、谷歌等待...

## Azure 应用服务的混合连接:

能访问在其他环境中的资源:

    能访问任何操作系统和任何应用。
    能访问在其他云环境中的主机、本地主机、甚至是指定的特定主机。

与单个TCP主机和端口关联。

服务不仅仅可以用于应用服务中的服务。

优势：

    不要求面向internet的终端点。
    web应用可以安全的访问本地系统。
    多数场景不需要修改防火墙的设置。
    与框架和操作系统无关。

# 使用Azure流量管理器控制流量

流量管理器用于管理从客户端到Azure应用的请求路由。

流量观其能持续跟踪应用的状态（运行、停止、删除）：能自动将流量从不可用节点转移走。

通过配置文件配置：

    配置中保存对请求的路由方法
    配置中保存可以将请求路由到的终端点列表
    配置中保存终端店的状态

## Azure流量管理器的路由方法：
基于优先级路由：将用户分发到特定应用 -> 如果发生故障，根据优先级方案，将用户路由到备用应用上。

基于权重路由：根据权重跨应用分发流量。你的权重定义可能均匀的分发用户。

基于性能路由：依据延迟，将用户分发到“最近”的应用。

基于低劣位置路由：基于用户当前的位置，将请求路由到最近的应用节点。

# Azure应用服务本地缓存

    提供内容的写入但丢弃缓存。
    站点启动后，异步创建缓存。
    缓存准备好后，自动提供服务。
    对客户端请求的响应比直接读取Azure存储账户速度块。

# 应用服务环境（ASES）

    是应用服务的一种变体，为安全运行更大规模的应用服务提供了完全隔离和专用的环境。

适用于具有如下需求的应用负载环境：

    非常大的规模，高于典型app服务的容量。
    需要隔离和安全的网络访问。
    高内存使用率。

支持单个或多个区域。

部署到一个虚拟网络。

ASE专用于单个订阅：最多100个实例。



